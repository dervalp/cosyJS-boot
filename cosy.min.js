!function(a){"use strict";var b,c=[],d="undefined"!=typeof window,e={},f=a.__cosy_config||{},g=f.deferred,h="cosy-type",i="cosy-id",j="app",k="["+h+"]",l="["+j+"]",m=Array.isArray,n={},o=(Array.prototype.forEach,d?f.conf:{}),p=function(a){for(var b=[],c=a.length>>>0;c--;)b[c]=a[c];return b},q=function(a,b){var c=a,d=null,e=0;for(b&&(d=b.id);c.parentNode!==d;)c=c.parentNode,e++;return e},r=function(){console.log(arguments)},s=function(a,b){var c=document.createElement("script");c.src=a,c.onload=b,c.onerror=r,(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},t=function(a){var b=p(document.querySelectorAll(l));b.forEach(function(a){c.push({el:a,name:a.getAttribute(j),depth:q(a)})}),a(b)},u=function(a){var b=o[a.id];if(b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}return a},v=function(a){var b,c=p(document.querySelectorAll(k)),d=c.map(x);d.forEach(function(a){e[a.type]||(e[a.type]=void 0)}),b=Object.keys(e),b.length>0&&D.attach(w(b),a)},w=function(a){var b="comp.js?mod=[",c="]",d=a;return b+d.join(",")+c},x=function(a){return{el:a,id:a.getAttribute(i),depth:q(a),type:a.getAttribute(h)}},y=function(a,b){return a.depth<b.depth?-1:a.depth>b.depth?1:0},z=function(a,c){if(!a.el.__cosy){var d=n[a.type],e=u(a),f=d.initialize;d.adapter&&!b[d.adapter]&&(f=b[d.adapter]=D.adapters[d.adapter]),c[a.id]=f(a.el,e,c),a.el.__cosy=!0}},A=function(a){var b=p(a.el.querySelectorAll(k)),c=b.map(x);c.sort(y).reverse().forEach(function(b){z(b,a)})},B=function(a){if(!a||!a.type)throw"should have at least a type";n[a.type]=a},C=function(a){v(function(){t(function(){c.sort(y).reverse().forEach(A),a&&a()})})},D=a._c={component:B};D="undefined"!=typeof exports?exports:a._c={},D.components=n,D.component=B,D.expose=z,D.init=C,D.attach=s,D.modules=function(a){var b;return a?(b=c.map(function(b){return~a.indexOf(b.name)?b:null}),m(a)?b:b&&1===b.length?b[0]:null):c.map(function(a){return a})},d&&!g&&C()}(this);